---
slug: /upsert-data-of-seekdb-js
---

# upsert - Update or insert data

The `upsert()` method is used to insert new records or update existing records. If a record with the given ID exists, it will be updated; otherwise, a new record will be inserted.

:::info

This API can only be used when connected with `SeekdbClient`. For more information about `SeekdbClient`, see [SeekdbClient](../50.seekdbclient-of-seekdb-js.md).

:::

## Prerequisites

* You have installed seekdb-js. For more information, see [Quick start](../../10.seekdb-js-get-started.md).

* You have installed the server mode of seekdb. For more information, see [Deploy seekdb by using yum install](../../../../../400.guides/400.deploy/700.server-mode/100.deploy-by-systemd.md).

* You have connected to the database. For more information, see [SeekdbClient](../50.seekdbclient-of-seekdb-js.md).

* The user to which you are connected has the `INSERT` and `UPDATE` privileges on the table to be operated. For more information about viewing the current user privileges, see [View user privileges](../../../../../400.guides/500.manage/300.security/300.access-control/200.user-and-permission/400.view-user-permissions.md). If the user does not have this privilege, contact the administrator to grant it. For more information about directly granting privileges, see [Directly grant privileges](../../../../../400.guides/500.manage/300.security/300.access-control/200.user-and-permission/200.direct-authority.md).

## Request parameters

```js
upsert(
    ids: ids,
    embeddings: embeddings,
    documents: documents,
    metadatas: metadatas
)
```

|Parameter|Type|Required|Description|Example Value|
|---|---|---|---|---|
|`ids`|string \| string\[\] |Yes|The ID to be modified. It can be a single ID or an array of IDs. |item1|
|`embeddings`|number\[\] \| number\[\]\[\]|No|It can be a single vector or an array of vectors. If not provided but documents are provided, the embeddingFunction will be used to generate embeddings. |[0.1, 0.2, 0.3]|
|`documents`|string \| string\[\]|No|The document content, which can be a single string or an array of strings. |"document text"|
|`metadatas`|Metadata \| Metadata\[\]|No|The metadata, which can be a single object or an array of objects. |`{"category": "AI"}`|

## Request example

```js
import { SeekdbClient } from "seekdb";

const client = new SeekdbClient({
  host: "127.0.0.1",
  port: 2881,
  user: "root",
  password: "",
  database: "test",
});

const collection = await client.getCollection({
  name: "my_collection"
});

await collection.upsert({
  ids: "item1",
  documents: "document text",
  metadatas: { category: "AI" }
});
```

## Response parameters

None

## Related operations

* [Insert data](200.add-data-of-seekdb-js.md)
* [Update data](300.update-data-of-seekdb-js.md)
* [Delete data](500.delete-data-of-seekdb-js.md)