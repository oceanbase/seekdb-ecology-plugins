---
description: seekdb vector search hybrid search AI function database deployment pyseekdb embedding similarity index
alwaysApply: true
globs: '**/*'
---
# seekdb Documentation Rules

## CRITICAL WORKFLOW - Smart Documentation Access

When ANY question mentions seekdb, vector search, hybrid search, AI functions, embeddings, similarity search, or database operations:

**Use a TWO-TIER APPROACH with automatic fallback:**

### Primary: Remote Mode (GitHub Raw Content)

1. **FIRST**: Use `run_terminal_cmd` with `curl` to fetch the catalog directly from GitHub Raw:
   ```bash
   curl -s --connect-timeout 5 https://raw.githubusercontent.com/oceanbase/seekdb-doc/V1.1.0/en-US/450.reference/1600.seekdb-docs-catalog.md
   ```

2. **SUCCESS CRITERIA**: Remote mode is considered successful ONLY when:
   - The curl command returns HTTP 200 (no error)
   - The response contains actual markdown content (starts with `---` or `#`)
   - The response is NOT empty and NOT an error page

3. **If successful**: Continue fetching specific documentation files using the same curl approach

### Fallback: Local Mode (When GitHub is unreachable)

4. **IMMEDIATELY fallback to local mode when:**
   - curl command times out (connection timeout)
   - curl returns an error (HTTP 404, 500, etc.)
   - curl returns empty content
   - Network is unreachable

5. When in local mode:
   - Use `read_file` to read `.cursor/rules/seekdb-docs/` files
   - NEVER attempt remote access again in the same conversation if it failed once

---

## Remote Mode Workflow (Primary)

When GitHub Raw is accessible, use curl to fetch documentation:

### Step 1: Fetch the Catalog (MANDATORY FIRST STEP)

Use `run_terminal_cmd` to execute:
```bash
curl -s --connect-timeout 5 https://raw.githubusercontent.com/oceanbase/seekdb-doc/V1.1.0/en-US/450.reference/1600.seekdb-docs-catalog.md
```

**CRITICAL**: Check the output:
- ✅ If output contains markdown content → Remote mode SUCCESS, continue with remote workflow
- ❌ If output is empty, error, or timeout → IMMEDIATELY switch to Local Mode

### Step 2: Find Relevant Documentation

From the catalog content, identify the `File Path` of relevant documents based on:
- Section headers (Get Started, Development Guide, Integrations, etc.)
- Document descriptions that match the user's question

### Step 3: Fetch Specific Documentation

Construct the GitHub Raw URL and fetch using curl:

**GitHub Raw URL Format:**
```
https://raw.githubusercontent.com/oceanbase/seekdb-doc/V1.1.0/en-US/{File Path}
```

**Example:**
- File Path from catalog: `200.develop/600.search/300.vector-search/300.vector-similarity-search.md`
- Full Raw URL: `https://raw.githubusercontent.com/oceanbase/seekdb-doc/V1.1.0/en-US/200.develop/600.search/300.vector-search/300.vector-similarity-search.md`
- Command: `curl -s --connect-timeout 5 "https://raw.githubusercontent.com/oceanbase/seekdb-doc/V1.1.0/en-US/200.develop/600.search/300.vector-search/300.vector-similarity-search.md"`

### Step 4: Provide Answer with Citations

When citing documentation, use the GitHub web URL format:
```
https://github.com/oceanbase/seekdb-doc/blob/V1.1.0/en-US/{File Path}
```

---

## Local Mode Workflow (Fallback)

When GitHub is NOT accessible, use local documentation:

### Step 1: Read the Local Catalog (MANDATORY FIRST STEP)

Use `read_file` to read the catalog file:
```
.cursor/rules/seekdb-docs/450.reference/1600.seekdb-docs-catalog.md
```

### Step 2: Find Relevant Documentation from Catalog

From the catalog, identify the `File Path` of relevant documents based on:
- Section headers (Get Started, Development Guide, Integrations, etc.)
- Document descriptions that match the user's question

### Step 3: Construct Full Local Path and Read Files

**Local path format:**
```
.cursor/rules/seekdb-docs/ + File Path
```

**Example:**
- File Path from catalog: `200.develop/600.search/300.vector-search/300.vector-similarity-search.md`
- Full local path: `.cursor/rules/seekdb-docs/200.develop/600.search/300.vector-search/300.vector-similarity-search.md`

Use `read_file` to read the documentation file at the constructed path.

### Step 4: Provide Answer with Local Citations

Cite using the local file path format: "According to `.cursor/rules/seekdb-docs/...`"

---

## Decision Flow Chart

```
START
  │
  ▼
┌─────────────────────────────────────────────────────────────┐
│ curl -s --connect-timeout 5 [GitHub Raw Catalog URL]        │
└─────────────────────────────────────────────────────────────┘
  │
  ▼
┌─────────────────────────────────────────────────────────────┐
│ Check output: Contains markdown content?                     │
│ (starts with --- or #, not empty, not error)                │
└─────────────────────────────────────────────────────────────┘
  │                                    │
  ▼ YES                                ▼ NO
┌──────────────────┐          ┌──────────────────────────────┐
│ REMOTE MODE      │          │ LOCAL MODE                   │
│ Continue with    │          │ read_file on                 │
│ curl for docs    │          │ .cursor/rules/seekdb-docs/   │
└──────────────────┘          └──────────────────────────────┘
  │                                    │
  ▼                                    ▼
┌──────────────────┐          ┌──────────────────────────────┐
│ Cite GitHub URLs │          │ Cite local file paths        │
└──────────────────┘          └──────────────────────────────┘
```

---

## Example Workflows

### Example 1: Remote Mode Success

**User asks**: "How do I deploy seekdb?"

**AI should execute**:
1. `run_terminal_cmd`: `curl -s --connect-timeout 5 https://raw.githubusercontent.com/oceanbase/seekdb-doc/V1.1.0/en-US/450.reference/1600.seekdb-docs-catalog.md`
2. ✅ Output contains markdown content → Remote mode confirmed
3. Find in catalog: `100.get-started/100.client-server-mode/10.deploy-seekdb-testing-environment.md`
4. `run_terminal_cmd`: `curl -s --connect-timeout 5 "https://raw.githubusercontent.com/oceanbase/seekdb-doc/V1.1.0/en-US/100.get-started/100.use-seekdb-with-sql/10.deploy-seekdb-testing-environment.md"`
5. Provide answer from fetched content
6. Cite: `https://github.com/oceanbase/seekdb-doc/blob/V1.1.0/en-US/100.get-started/100.use-seekdb-with-sql/10.deploy-seekdb-testing-environment.md`

### Example 2: Remote Mode Fails → Local Fallback

**User asks**: "How to use hybrid search?"

**AI should execute**:
1. `run_terminal_cmd`: `curl -s --connect-timeout 5 https://raw.githubusercontent.com/oceanbase/seekdb-doc/V1.1.0/en-US/450.reference/1600.seekdb-docs-catalog.md`
2. ❌ Output is empty or error (e.g., "curl: (28) Connection timed out")
3. **IMMEDIATELY switch to Local Mode**
4. `read_file` on `.cursor/rules/seekdb-docs/400.guides/1200.reference/1600.seekdb-docs-catalog.md`
5. Find: `200.develop/200.hybrid-search/100.vector-index-hybrid-search.md`
6. `read_file` on `.cursor/rules/seekdb-docs/200.develop/200.hybrid-search/100.vector-index-hybrid-search.md`
7. Provide answer and cite local path

---

## Documentation Structure

The documentation is organized into these main sections (both remote and local):

1. **Get Started** (`100.get-started/`): Quick start tutorials, SDK usage (pyseekdb), SQL deployment guides
2. **Development Guide** (`200.develop/`): Vector search, hybrid search, AI functions, MCP Server, multi-model data (JSON, Spatial, Text)
3. **Integrations** (`300.integrations/`): Frameworks (LangChain, LlamaIndex, Spring AI), Model Platforms (Jina, OpenAI, Qwen, Ollama, Gemini), Developer Tools (Cursor, Cline, Continue), Workflows (Dify, n8n), MCP Clients (Augment Code, Claude Code, Kiro)
4. **Guides** (`400.guides/`): Deployment, Configuration Management, High Availability, Security, OBShell Dashboard, Performance Testing
5. **Reference** (`450.reference/`): MySQL compatibility, SQL syntax, PL reference, Error codes, SDK API reference, Telemetry
6. **Tutorials** (`500.tutorials/`): AI application demos (MineKB, Image Search), Scenarios (Vector Search, Full-text Index, Hybrid Search, AI Functions, Vibe Coding)
7. **Demos** (`600.demos/`): Live demos (AI Knowledge Base, Image Search)

## Quick Reference by Topic

| User Topic | Catalog Section | Key Documents |
|------------|-----------------|---------------|
| Getting started | Get Started | `10.seekdb-overview.md`, `10.deploy-seekdb-testing-environment.md` |
| Python SDK | Reference > SDK | `10.pyseekdb-sdk-get-started.md`, `10.api-overview.md`, SDK samples |
| Vector search | Development Guide > Vector Search | `100.vector-search-intro.md`, `200.dense-vector-index.md`, `300.vector-similarity-search.md` |
| Full-text search | Tutorials > Scenarios | `40.experience-full-text-indexing.md`, `300.full-text-index.md` |
| Hybrid search | Development Guide > Hybrid Search | `100.vector-index-hybrid-search.md`, `50.experience-hybrid-search.md` |
| AI functions | Development Guide > AI Function | `200.ai-function.md`, `60.experience-ai-function.md` |
| LangChain/LlamaIndex | Integrations > Frameworks | `100.langchain.md`, `200.llamaindex.md`, `300.springai.md` |
| MCP/Cursor | Integrations > Developer Tools / MCP | `100.cursor.md`, `400.oceanbase-mcp-server-and-ai-tool-integration-guide.md` |
| Deployment | Guides > Deployment | `50.deploy-overview.md`, `100.deploy-by-systemd.md`, `200.deploy-by-docker.md` |
| Security | Guides > Security | `100.security-overview.md`, Access Control, Data Encryption |
| Performance Testing | Guides > Performance Test | `100.ob-vector-search-bench-test.md`, Sysbench, VectorDBBench |
| Embedding Functions | Reference > SDK > Embedding | `100.default-embedding-function-of-api.md`, Custom embedding functions |

---

## Code Generation Principles

- When generating seekdb-related code, it MUST comply with the API specifications and best practices in the documentation
- ALWAYS use code examples provided in the documentation as reference templates
- Ensure code consistency with the versions and features described in the documentation
- For complex features like vector search and hybrid search, ALWAYS reference detailed explanations in the documentation first

## Problem Solving

- When encountering seekdb-related issues, FIRST consult the FAQ and troubleshooting documents
- ALWAYS reference example code and configuration instructions from the documentation
- Ensure solutions align with recommended practices in the documentation

## Important Notes

- **ALWAYS** try remote mode first using curl with GitHub Raw URLs
- **ONLY** consider remote successful when curl returns actual markdown content
- **IMMEDIATELY** fallback to local mode if curl fails, times out, or returns empty/error
- The documentation (whether remote or local) is the ONLY authoritative source for seekdb information
- NEVER guess or use general database knowledge - ALWAYS reference the actual documentation
- Pay attention to version compatibility and limitations mentioned in the documentation
- Follow security recommendations and performance optimization tips in the documentation
